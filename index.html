<!DOCTYPE html>
<html>
<head>
  <title>Page Title</title>
  <link rel="stylesheet" href="bootstrap.css">
  <script src="https://unpkg.com/dropbox/dist/Dropbox-sdk.min.js"></script>
</head>
<body>
  <div>
    <div>
      <label for="formFile" class="form-label mt-4">Default file input example</label>
        <div>
          <label for="exampleSelect1" class="form-label mt-4">Example select</label>
          <select class="form-select" id="exampleSelect1">
            <option>2 PRO NJPF gr2</option>
          </select>
        </div>
      <input id="upload_input" class="form-control" type="file">
    </div>

    <button id="upload_button" class="btn btn-primary" onclick="my_upload_file();">Submit</button>
  </div>
  <script>
    function my_upload_file(){

      fetch('https://api.dropboxapi.com/oauth2/token', {
        method: 'POST',
        code: 'sl.CAgBxZ-ncjb0m-OIZA3ENzsZFQ91T7aHFQw0nuR1hp_gzSQeW7U6KFPqhpO5wmLiBrORAGucpjYUJVywnjflGvBOwJ48BQXcq4cyyC-AjFOLiqK12TpvF6mVU_ypRdEoBgaCflpYnDVo',
        grant_type: 'authorization_code',
        headers: {
        'Content-Type': "application/x-www-form-urlencoded"
        },
        xrfp9n22m5c0d0l: '2ua1cs9dutec6ou'
      })
      .then(res => res.json())
      .then(data => console.log('access data =>', data))
      .catch(err => console.log('access err =>',err));
      //demande de session
      fetch('https://content.dropboxapi.com/2/files/upload_session/start',{
        method: 'post',
        headers: {'Authorization': 'Bearer sl.CAi8AAVhKNtqDDXRdNkKWc2ORqfBdVRAJOSWB96nbHbmz9yPm_yoUBlIfCYB80R5pY6Mvq3KBOBdhvdHe82AkqIrFNvvQuscRbroUCX5zY1xs2bf7QEAoW_nxsRNJnWWXLlyUfK0BoPn',
                  'Content-Type': 'application/octet-stream',
                  'Dropbox-API-Arg': '{"close":false}'
                  }
      }).then(function(response) {
            console.log(response.json());
      });
      
      //console.log('click');
      //const selectedFile = document.getElementById('upload_input').files[0];
      //console.log(selectedFile);
      
      //fetch('https://content.dropboxapi.com/2/files/upload', {
        //method: 'post',
        //body: selectedFile, //Base64 
        //headers: {'Authorization': 'Bearer sl.CAi8AAVhKNtqDDXRdNkKWc2ORqfBdVRAJOSWB96nbHbmz9yPm_yoUBlIfCYB80R5pY6Mvq3KBOBdhvdHe82AkqIrFNvvQuscRbroUCX5zY1xs2bf7QEAoW_nxsRNJnWWXLlyUfK0BoPn',
                  //'Content-Type': 'application/octet-stream',
                  //'Dropbox-API-Arg': '{"path": "/marie_lora_upload_file/'+selectedFile.name+'","mode": "add","autorename": true,"mute": false,"strict_conflict": false}'
                  //}
      //}).then(function(response) {
           // console.log(response.json());
     // });
    }
  </script>
</body>
</html>
